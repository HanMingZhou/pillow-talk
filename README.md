# Pillow Talk - å¤šæ¨¡æ€æ™ºèƒ½è§†è§‰è¯­éŸ³åŠ©æ‰‹

<div align="center">

**ä¸€æ¬¾åŸºäºå¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½è§†è§‰è¯­éŸ³åŠ©æ‰‹**

é€šè¿‡æ‘„åƒå¤´æ‰«æç°å®ç‰©ä½“ï¼ŒAI è¿›è¡Œè§†è§‰ç†è§£å¹¶ç”Ÿæˆè‡ªç„¶çš„è¯­éŸ³å¯¹è¯

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡) â€¢ [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—) â€¢ [éƒ¨ç½²](#éƒ¨ç½²)

</div>

---

## é¡¹ç›®æ¦‚è¿°

Pillow Talk æ˜¯ä¸€æ¬¾åˆ›æ–°çš„å¤šæ¨¡æ€ AI åŠ©æ‰‹åº”ç”¨ï¼Œç»“åˆäº†è®¡ç®—æœºè§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†å’Œè¯­éŸ³åˆæˆæŠ€æœ¯ã€‚ç”¨æˆ·åªéœ€ç”¨æ‰‹æœºæ‘„åƒå¤´æ‰«æç‰©ä½“ï¼ŒAI å°±èƒ½è¯†åˆ«å¹¶ç”¨è‡ªç„¶è¯­éŸ³ä¸ä½ å¯¹è¯ï¼Œæä¾›é™ªä¼´ã€ç§‘æ™®æˆ–å¨±ä¹ä½“éªŒã€‚

### æ ¸å¿ƒèƒ½åŠ›

- ğŸ¯ **è§†è§‰è¯†åˆ«**ï¼šå®æ—¶é¢„è§ˆæˆ–æ‹ç…§æ‰«æç‰©ä½“ï¼Œåˆ©ç”¨å¤šæ¨¡æ€æ¨¡å‹è¿›è¡Œè§†è§‰ç†è§£
- ğŸ¤– **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒ OpenAIã€Google Geminiã€æ™ºè°± GLMã€è±†åŒ…ã€åƒé—®ç­‰ä¸»æµæ¨¡å‹
- ğŸ’¬ **å¤šè½®å¯¹è¯**ï¼šä¿æŒä¸Šä¸‹æ–‡çš„è¿ç»­å¯¹è¯ï¼Œè®©äº¤äº’æ›´è‡ªç„¶
- ğŸ­ **äººè®¾åˆ‡æ¢**ï¼šå†…ç½®å¤šç§ Prompt æ¨¡æ¿ï¼ˆåšç‰©é¦†è®²è§£å‘˜ã€å¯çˆ±å® ç‰©ã€ç§‘æ™®ä¸“å®¶ç­‰ï¼‰
- ğŸ”Š **è¯­éŸ³äº¤äº’**ï¼šå°† AI ç”Ÿæˆçš„æ–‡æœ¬è½¬åŒ–ä¸ºè‡ªç„¶è¯­éŸ³è¾“å‡ºï¼ˆTTSï¼‰
- ğŸ“± **è·¨å¹³å°**ï¼šæ”¯æŒ iOS 15.0+ å’Œ Android 10.0+ è®¾å¤‡

---

## åŠŸèƒ½ç‰¹æ€§

### ç§»åŠ¨ç«¯åŠŸèƒ½

#### ğŸ“· æ‘„åƒå¤´æ¨¡å—
- å®æ—¶é¢„è§ˆä¸è‡ªåŠ¨å¯¹ç„¦
- æ”¯æŒæ‰‹åŠ¨æ‹ç…§æˆ–è‡ªåŠ¨è¯†åˆ«æ¨¡å¼
- å›¾åƒé¢„å¤„ç†ï¼šå‹ç¼©ã€è£å‰ªåè½¬æ¢ä¸º Base64 ä¸Šä¼ 
- å®Œå–„çš„æƒé™ç®¡ç†

#### ğŸ¨ æ¨¡å‹é…ç½®
- **é¢„è®¾æ¨¡å‹**ï¼šOpenAI GPT-4o/4Vã€Google Gemini 2.5 Proã€æ™ºè°± GLM-4Vã€è±†åŒ…ã€åƒé—®
- **è‡ªå®šä¹‰æ¨¡å‹**ï¼šæ”¯æŒé…ç½®è‡ªå®šä¹‰ API ç«¯ç‚¹
- **æµ‹è¯•è¿æ¥**ï¼šéªŒè¯æ¨¡å‹é…ç½®æœ‰æ•ˆæ€§

#### ğŸ’­ Prompt ç®¡ç†
- å†…ç½®å¤šç§äººè®¾æ¨¡æ¿
- æ”¯æŒè‡ªå®šä¹‰ System Prompt
- å¿«é€Ÿåˆ‡æ¢å¯¹è¯é£æ ¼

#### ğŸµ è¯­éŸ³æ’­æ”¾
- æ”¯æŒå¤šç§ TTS æœåŠ¡ï¼ˆOpenAIã€Googleã€Azureã€Edgeã€é˜¿é‡Œäº‘ï¼‰
- ç”·å£°/å¥³å£°é€‰æ‹©
- è¯­é€Ÿè°ƒæ•´ï¼ˆ0.5x - 2.0xï¼‰
- æµå¼æ’­æ”¾å’Œè¯­éŸ³ç¼“å­˜

#### ğŸ“ å†å²è®°å½•
- æœ¬åœ°ä¿å­˜æœ€è¿‘çš„æ‰«æå’Œå¯¹è¯è®°å½•
- æ”¯æŒæŸ¥çœ‹ã€åˆ é™¤å’Œæ¸…ç©ºå†å²

### åç«¯åŠŸèƒ½

#### ğŸ”Œ æ¨¡å‹é€‚é…å±‚
- ç»Ÿä¸€çš„å¤šæ¨¡æ€æ¥å£æŠ½è±¡
- æ”¯æŒå¤šå®¶äº‘å‚å•†æ¨¡å‹
- æµå¼å“åº”æ”¯æŒï¼ˆSSEï¼‰
- æ™ºèƒ½é”™è¯¯å¤„ç†å’Œé‡è¯•

#### ğŸ¯ Prompt å¼•æ“
- çµæ´»çš„ Prompt æ¨¡æ¿ç³»ç»Ÿ
- å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†
- è‡ªåŠ¨ç»„è£…ç¬¦åˆå„æ¨¡å‹è¦æ±‚çš„æ¶ˆæ¯ç»“æ„

#### ğŸ”Š TTS æœåŠ¡
- æ”¯æŒå¤šç§ TTS æä¾›å•†
- æµå¼éŸ³é¢‘è¾“å‡º
- éŸ³é¢‘æ ¼å¼è½¬æ¢

#### ğŸ”’ å®‰å…¨ç‰¹æ€§
- API Key åŠ å¯†å­˜å‚¨ï¼ˆAES-256ï¼‰
- è¯·æ±‚é™æµä¿æŠ¤
- HTTPS é€šä¿¡
- è¾“å…¥éªŒè¯å’Œæ³¨å…¥é˜²æŠ¤

#### ğŸ“Š å¯è§‚æµ‹æ€§
- ç»“æ„åŒ–æ—¥å¿—è®°å½•
- è¯·æ±‚è¿½è¸ªï¼ˆrequest_idï¼‰
- æ€§èƒ½æŒ‡æ ‡ç›‘æ§

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

#### åç«¯
- Python 3.11+
- Poetry æˆ– uv

#### ç§»åŠ¨ç«¯
- Node.js 18+
- npm æˆ– yarn
- Expo CLI
- iOS Simulatorï¼ˆiOS å¼€å‘ï¼‰æˆ– Xcode
- Android Studio å’Œ Android SDKï¼ˆAndroid å¼€å‘ï¼‰

### å®‰è£…å’Œè¿è¡Œ

#### 1. åç«¯æœåŠ¡

```bash
# è¿›å…¥åç«¯ç›®å½•
cd pillow-talk-backend

# å®‰è£…ä¾èµ–
poetry install

# å¦‚æœéœ€è¦ç‰¹å®šæ¨¡å‹æ”¯æŒ
poetry install -E ark      # è±†åŒ…æ”¯æŒ
poetry install -E glm      # æ™ºè°± GLM æ”¯æŒ
poetry install -E gemini   # Gemini æ”¯æŒ

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®å¿…éœ€çš„ API Keys

# è¿è¡ŒæœåŠ¡
make run
# æˆ–
uvicorn pillow_talk.main:app --reload
```

æœåŠ¡å°†åœ¨ http://localhost:8000 å¯åŠ¨

API æ–‡æ¡£ï¼š
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

#### 2. ç§»åŠ¨ç«¯åº”ç”¨

```bash
# è¿›å…¥ç§»åŠ¨ç«¯ç›®å½•
cd pillow-talk-mobile

# å®‰è£…ä¾èµ–
yarn install
# æˆ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®åç«¯ API åœ°å€

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
yarn start

# åœ¨ iOS æ¨¡æ‹Ÿå™¨è¿è¡Œ
yarn ios

# åœ¨ Android æ¨¡æ‹Ÿå™¨è¿è¡Œ
yarn android
```

---

## æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Mobile App                           â”‚
â”‚              (React Native + TypeScript)                â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Camera   â”‚  â”‚  Chat    â”‚  â”‚ Settings â”‚             â”‚
â”‚  â”‚ Screen   â”‚  â”‚  Screen  â”‚  â”‚  Screen  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚         Services Layer                    â”‚          â”‚
â”‚  â”‚  â€¢ API Client  â€¢ Config  â€¢ History       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTPS/JSON
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Backend API (FastAPI)                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚         API Gateway                       â”‚          â”‚
â”‚  â”‚  â€¢ Routes  â€¢ Middleware  â€¢ Auth          â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                         â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚         Core Business Logic               â”‚          â”‚
â”‚  â”‚  â€¢ Conversation  â€¢ Prompt  â€¢ Image       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                         â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚   Model     â”‚  â”‚     TTS     â”‚                      â”‚
â”‚  â”‚  Adapters   â”‚  â”‚   Services  â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI Models  â”‚    â”‚ TTS Services â”‚
â”‚  â€¢ OpenAI    â”‚    â”‚  â€¢ OpenAI    â”‚
â”‚  â€¢ Gemini    â”‚    â”‚  â€¢ Google    â”‚
â”‚  â€¢ GLM       â”‚    â”‚  â€¢ Azure     â”‚
â”‚  â€¢ Doubao    â”‚    â”‚  â€¢ Edge      â”‚
â”‚  â€¢ Qwen      â”‚    â”‚  â€¢ Ali       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### åç«¯
- **æ¡†æ¶**ï¼šFastAPI
- **è¯­è¨€**ï¼šPython 3.11+
- **ä¾èµ–ç®¡ç†**ï¼šPoetry
- **æ•°æ®éªŒè¯**ï¼šPydantic
- **HTTP å®¢æˆ·ç«¯**ï¼šhttpx
- **æ—¥å¿—**ï¼šstructlog
- **æµ‹è¯•**ï¼špytest + pytest-asyncio
- **ä»£ç è´¨é‡**ï¼šruff + mypy

#### ç§»åŠ¨ç«¯
- **æ¡†æ¶**ï¼šReact Native + Expo
- **è¯­è¨€**ï¼šTypeScript
- **å¯¼èˆª**ï¼šReact Navigation
- **HTTP å®¢æˆ·ç«¯**ï¼šAxios
- **æœ¬åœ°å­˜å‚¨**ï¼šAsyncStorage
- **æ‘„åƒå¤´**ï¼šexpo-camera
- **éŸ³é¢‘**ï¼šexpo-av
- **æµ‹è¯•**ï¼šJest + React Native Testing Library

---

## é¡¹ç›®ç»“æ„

### åç«¯ç»“æ„

```
pillow-talk-backend/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ pillow_talk/
â”‚       â”œâ”€â”€ main.py              # FastAPI åº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ api/                 # API è·¯ç”±å’Œä¸­é—´ä»¶
â”‚       â”‚   â”œâ”€â”€ routes.py
â”‚       â”‚   â”œâ”€â”€ middleware.py
â”‚       â”‚   â””â”€â”€ dependencies.py
â”‚       â”œâ”€â”€ core/                # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ conversation.py  # å¯¹è¯ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ prompt.py        # Prompt å¼•æ“
â”‚       â”‚   â””â”€â”€ image.py         # å›¾åƒé¢„å¤„ç†
â”‚       â”œâ”€â”€ adapters/            # æ¨¡å‹é€‚é…å™¨
â”‚       â”‚   â”œâ”€â”€ base.py
â”‚       â”‚   â”œâ”€â”€ openai.py
â”‚       â”‚   â”œâ”€â”€ gemini.py
â”‚       â”‚   â”œâ”€â”€ glm.py
â”‚       â”‚   â”œâ”€â”€ doubao.py
â”‚       â”‚   â””â”€â”€ qwen.py
â”‚       â”œâ”€â”€ tts/                 # TTS æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ adapters/
â”‚       â”‚   â”œâ”€â”€ manager.py
â”‚       â”‚   â””â”€â”€ config.py
â”‚       â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚       â”‚   â”œâ”€â”€ request.py
â”‚       â”‚   â”œâ”€â”€ response.py
â”‚       â”‚   â””â”€â”€ config.py
â”‚       â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚           â”œâ”€â”€ logger.py
â”‚           â”œâ”€â”€ exceptions.py
â”‚           â””â”€â”€ parser.py
â”œâ”€â”€ tests/                       # æµ‹è¯•ä»£ç 
â”œâ”€â”€ pyproject.toml              # Poetry é…ç½®
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

### ç§»åŠ¨ç«¯ç»“æ„

```
pillow-talk-mobile/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ screens/                # å±å¹•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CameraScreen.tsx
â”‚   â”‚   â”œâ”€â”€ ChatScreen.tsx
â”‚   â”‚   â”œâ”€â”€ SettingsScreen.tsx
â”‚   â”‚   â””â”€â”€ HistoryScreen.tsx
â”‚   â”œâ”€â”€ components/             # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CameraView.tsx
â”‚   â”‚   â”œâ”€â”€ AudioPlayer.tsx
â”‚   â”‚   â””â”€â”€ PromptSelector.tsx
â”‚   â”œâ”€â”€ services/               # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”œâ”€â”€ chatService.ts
â”‚   â”‚   â”œâ”€â”€ configService.ts
â”‚   â”‚   â””â”€â”€ historyService.ts
â”‚   â”œâ”€â”€ navigation/             # å¯¼èˆªé…ç½®
â”‚   â”‚   â””â”€â”€ AppNavigator.tsx
â”‚   â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ types/                  # TypeScript ç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ imageProcessor.ts
â”œâ”€â”€ assets/                     # èµ„æºæ–‡ä»¶
â”œâ”€â”€ App.tsx                     # æ ¹ç»„ä»¶
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## API æ–‡æ¡£

### æ ¸å¿ƒç«¯ç‚¹

#### 1. å¯¹è¯æ¥å£

```http
POST /api/v1/chat
Content-Type: application/json

{
  "image_base64": "data:image/jpeg;base64,...",
  "system_prompt": "ä½ æ˜¯ä¸€ä¸ªåšå­¦çš„åšç‰©é¦†è®²è§£å‘˜",
  "provider": "openai",
  "stream": false,
  "tts_enabled": true,
  "conversation_id": "uuid"  // å¯é€‰ï¼Œç”¨äºå¤šè½®å¯¹è¯
}
```

**å“åº”**ï¼š
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "text": "è¿™æ˜¯ä¸€ä¸ªç²¾ç¾çš„é’èŠ±ç“·ç“¶...",
    "audio_url": "https://storage.../audio.mp3",
    "conversation_id": "uuid",
    "latency_ms": 1200
  }
}
```

#### 2. æµ‹è¯•è¿æ¥

```http
POST /api/v1/test-connection
Content-Type: application/json

{
  "provider": "custom",
  "custom_config": {
    "base_url": "http://my-server/v1",
    "api_key": "sk-...",
    "model_name": "llava-v1.5"
  }
}
```

#### 3. è·å–æ¨¡å‹åˆ—è¡¨

```http
GET /api/v1/models
```

#### 4. å¥åº·æ£€æŸ¥

```http
GET /health
```

### æ”¯æŒçš„æ¨¡å‹æä¾›å•†

- `openai`: OpenAI GPT-4V/4o
- `gemini`: Google Gemini å¤šæ¨¡æ€æ¨¡å‹
- `glm`: æ™ºè°± AI GLM-4V ç³»åˆ—
- `doubao`: å­—èŠ‚è·³åŠ¨è±†åŒ…è§†è§‰æ¨¡å‹
- `qwen`: é˜¿é‡Œäº‘åƒé—®è§†è§‰æ¨¡å‹
- `custom`: è‡ªå®šä¹‰æ¨¡å‹ç«¯ç‚¹

---

## å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

#### ä»£ç è§„èŒƒ

```bash
# æ ¼å¼åŒ–ä»£ç 
make format

# ä»£ç æ£€æŸ¥
make lint

# ç±»å‹æ£€æŸ¥
make type-check

# è¿è¡Œæµ‹è¯•
make test

# æµ‹è¯•è¦†ç›–ç‡
make coverage
```

#### æ·»åŠ æ–°çš„æ¨¡å‹é€‚é…å™¨

1. åœ¨ `src/pillow_talk/adapters/` åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿ `MultimodalInterface` åŸºç±»
3. å®ç° `process_image` å’Œ `test_connection` æ–¹æ³•
4. åœ¨ `ModelAdapterFactory` ä¸­æ³¨å†Œæ–°é€‚é…å™¨

ç¤ºä¾‹ï¼š
```python
from .base import MultimodalInterface

class NewModelAdapter(MultimodalInterface):
    async def process_image(
        self,
        image_data: str,
        prompt: str,
        conversation_history: list[dict[str, str]] | None = None,
        stream: bool = False,
    ) -> str | AsyncIterator[str]:
        # å®ç°é€»è¾‘
        pass
    
    async def test_connection(self) -> tuple[bool, str, float]:
        # å®ç°é€»è¾‘
        pass
```

### ç§»åŠ¨ç«¯å¼€å‘

#### ä»£ç è§„èŒƒ

```bash
# ESLint æ£€æŸ¥
yarn lint

# ä¿®å¤ ESLint é—®é¢˜
yarn lint:fix

# æ ¼å¼åŒ–ä»£ç 
yarn format

# ç±»å‹æ£€æŸ¥
yarn type-check

# è¿è¡Œæµ‹è¯•
yarn test
```

#### æ·»åŠ æ–°å±å¹•

1. åœ¨ `src/screens/` åˆ›å»ºæ–°ç»„ä»¶
2. åœ¨ `src/navigation/AppNavigator.tsx` ä¸­æ³¨å†Œè·¯ç”±
3. æ·»åŠ å¿…è¦çš„ç±»å‹å®šä¹‰

---

## éƒ¨ç½²

### Docker éƒ¨ç½²ï¼ˆåç«¯ï¼‰

#### æ„å»ºé•œåƒ

```bash
cd pillow-talk-backend
make docker-build
```

#### è¿è¡Œå®¹å™¨

```bash
make docker-run
```

#### ä½¿ç”¨ Docker Compose

```bash
docker-compose up -d
```

### ç§»åŠ¨ç«¯æ‰“åŒ…

#### iOS

```bash
# ä½¿ç”¨ Expo
expo build:ios

# æˆ–ä½¿ç”¨ React Native CLI
cd ios
pod install
cd ..
npx react-native run-ios --configuration Release
```

#### Android

```bash
# ä½¿ç”¨ Expo
expo build:android

# æˆ–ä½¿ç”¨ React Native CLI
cd android
./gradlew assembleRelease
```

---

## é…ç½®è¯´æ˜

### åç«¯ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# åº”ç”¨é…ç½®
APP_NAME=pillow-talk
APP_VERSION=0.1.0
DEBUG=false

# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=8000

# å®‰å…¨é…ç½®
ENCRYPTION_KEY=your-encryption-key-here  # å¿…é¡»ä¿®æ”¹ï¼

# æ¨¡å‹ API Keysï¼ˆæ ¹æ®ä½¿ç”¨çš„æ¨¡å‹é…ç½®ï¼‰
OPENAI_API_KEY=sk-...
DOUBAO_API_KEY=...
GLM_API_KEY=...
GEMINI_API_KEY=...
QWEN_API_KEY=...

# TTS é…ç½®
TTS_PROVIDER=openai
TTS_VOICE=alloy
TTS_SPEED=1.0

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

### ç§»åŠ¨ç«¯ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# API é…ç½®
API_BASE_URL=http://localhost:8000

# é»˜è®¤é…ç½®
DEFAULT_MODEL=openai
DEFAULT_TTS_PROVIDER=openai
```

---

## æ€§èƒ½æŒ‡æ ‡

- **å›¾åƒå¤„ç†æ—¶é—´**ï¼š< 500ms
- **é¦–å­—å»¶è¿Ÿï¼ˆTTFBï¼‰**ï¼š< 3 ç§’ï¼ˆç½‘ç»œè‰¯å¥½ï¼‰
- **TTS é¦–å­—å»¶è¿Ÿ**ï¼š< 3 ç§’
- **å¹¶å‘æ”¯æŒ**ï¼š> 100 QPS
- **éŸ³é¢‘æš‚åœå“åº”**ï¼š< 100ms
- **ç•Œé¢å“åº”æ—¶é—´**ï¼š< 200ms

---

## å®‰å…¨ç‰¹æ€§

- âœ… æ‰€æœ‰ API é€šä¿¡ä½¿ç”¨ HTTPS
- âœ… API Key ä½¿ç”¨ AES-256 åŠ å¯†å­˜å‚¨
- âœ… è¯·æ±‚é™æµä¿æŠ¤ï¼ˆ60 req/min per IPï¼‰
- âœ… è¾“å…¥éªŒè¯å’Œæ³¨å…¥é˜²æŠ¤
- âœ… å›¾åƒæ•°æ®ä¸æŒä¹…åŒ–å­˜å‚¨
- âœ… ç»“æ„åŒ–æ—¥å¿—ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯

---

## æ•…éšœæ’é™¤

### åç«¯å¸¸è§é—®é¢˜

**é—®é¢˜ï¼šæ¨¡å‹è¿æ¥å¤±è´¥**
- æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®é…ç½®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

**é—®é¢˜ï¼šTTS æœåŠ¡ä¸å¯ç”¨**
- ç¡®è®¤ TTS æä¾›å•†çš„ API Key å·²é…ç½®
- æ£€æŸ¥ TTS é…ç½®æ–‡ä»¶æ ¼å¼

### ç§»åŠ¨ç«¯å¸¸è§é—®é¢˜

**é—®é¢˜ï¼šæ‘„åƒå¤´æ— æ³•æ‰“å¼€**
- æ£€æŸ¥è®¾å¤‡æƒé™è®¾ç½®
- ç¡®è®¤ Info.plistï¼ˆiOSï¼‰æˆ– AndroidManifest.xmlï¼ˆAndroidï¼‰ä¸­å·²æ·»åŠ æƒé™

**é—®é¢˜ï¼šæ— æ³•è¿æ¥åç«¯**
- æ£€æŸ¥ API_BASE_URL é…ç½®
- ç¡®è®¤åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥ç½‘ç»œè¿æ¥

---

## è·¯çº¿å›¾

### Phase 1: MVP âœ…
- [x] åç«¯åŸºç¡€æ¶æ„
- [x] OpenAI GPT-4V æ¥å…¥
- [x] ç§»åŠ¨ç«¯åŸºç¡€ç›¸æœºé¡µé¢
- [x] æ‹ç…§è¯†åˆ«æµç¨‹

### Phase 2: å¤šæ¨¡å‹å’Œè¯­éŸ³ ğŸš§
- [x] å¤šæ¨¡å‹é€‚é…å±‚
- [x] TTS æœåŠ¡é›†æˆ
- [ ] è‡ªå®šä¹‰ API é…ç½®
- [ ] Prompt é…ç½®ç•Œé¢

### Phase 3: ä¼˜åŒ–å’Œå‘å¸ƒ ğŸ“‹
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å¤šè½®å¯¹è¯æ”¯æŒ
- [ ] å®Œæ•´æµ‹è¯•è¦†ç›–
- [ ] åº”ç”¨å•†åº—ä¸Šæ¶

### Phase 4: æ‰©å±•åŠŸèƒ½ ğŸ’¡
- [ ] AR æ¨¡å¼è¯†åˆ«
- [ ] æƒ…ç»ªé™ªä¼´æ¨¡å¼
- [ ] ç¤¾åŒºåˆ†äº«
- [ ] äº‘ç«¯å¯¹è¯è®°å½•åŒæ­¥
- [ ] æœ¬åœ°è½»é‡æ¨¡å‹æ¨ç†

---

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘è§„èŒƒ

- éµå¾ªé¡¹ç›®çš„ä»£ç é£æ ¼
- æ·»åŠ å¿…è¦çš„æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/pillow-talk
- é—®é¢˜åé¦ˆï¼šhttps://github.com/pillow-talk/issues
- é‚®ç®±ï¼šteam@pillowtalk.ai

---

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- [React Native](https://reactnative.dev/) - è·¨å¹³å°ç§»åŠ¨åº”ç”¨æ¡†æ¶
- [OpenAI](https://openai.com/) - å¤šæ¨¡æ€ AI æ¨¡å‹
- [Google Gemini](https://deepmind.google/technologies/gemini/) - å¤šæ¨¡æ€ AI æ¨¡å‹
- [æ™ºè°± AI](https://www.zhipuai.cn/) - GLM ç³»åˆ—æ¨¡å‹
- [å­—èŠ‚è·³åŠ¨](https://www.volcengine.com/) - è±†åŒ…æ¨¡å‹
- [é˜¿é‡Œäº‘](https://www.aliyun.com/) - åƒé—®æ¨¡å‹

---

<div align="center">

**ç”¨ AI çš„çœ¼ç›çœ‹ä¸–ç•Œï¼Œç”¨æ¸©æš–çš„å£°éŸ³é™ªä¼´ä½ ** â¤ï¸

Made with â¤ï¸ by Pillow Talk Team

</div>
